pipeline { //pipeline

    agent any
    options { disableConcurrentBuilds() }

    // tools {
    // ansible 'ansibletool'
    // }

    stages ('Setup Roboshop Application') { //stages
        stage ('Installing Frontend Server') { //Frontend stage
            steps { //Frontend steps
            // withCredentials([aws(accessKeyVariable: 'AWS_ACCESS_KEY_ID', credentialsId: 'awskey', secretKeyVariable: 'AWS_SECRET_ACCESS_KEY')]) {
            //         git 'https://github.com/imjitthu/tfas-frontend.git'
            //         sh "terraform init"    
            //         sh "terraform apply -auto-approve"   
            //           } //with credentials
            ansiblePlaybook credentialsId: 'DevOps321', installation: 'ansibletool', inventory: '172.31.78.249,', playbook: 'frontend.yml'
                } //Frontend steps
            } //Frontend stage
        } //stages
    } //pipeline